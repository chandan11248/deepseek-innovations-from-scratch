<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 2200" font-family="'Segoe UI', 'Helvetica Neue', Arial, sans-serif">
  <defs>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0a0a1a"/>
      <stop offset="100%" style="stop-color:#0d1117"/>
    </linearGradient>
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f0c29"/>
      <stop offset="50%" style="stop-color:#302b63"/>
      <stop offset="100%" style="stop-color:#24243e"/>
    </linearGradient>
    <linearGradient id="accent1" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#667eea"/>
      <stop offset="100%" style="stop-color:#764ba2"/>
    </linearGradient>
    <linearGradient id="fp32Grad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#2ecc71"/>
      <stop offset="100%" style="stop-color:#27ae60"/>
    </linearGradient>
    <linearGradient id="fp16Grad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#f093fb"/>
      <stop offset="100%" style="stop-color:#f5576c"/>
    </linearGradient>
    <linearGradient id="bf16Grad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#4facfe"/>
      <stop offset="100%" style="stop-color:#00f2fe"/>
    </linearGradient>
    <linearGradient id="fp8Grad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#ff6b6b"/>
      <stop offset="100%" style="stop-color:#ffa502"/>
    </linearGradient>
    <filter id="shadow" x="-4%" y="-4%" width="108%" height="108%">
      <feDropShadow dx="0" dy="4" stdDeviation="8" flood-color="#000000" flood-opacity="0.4"/>
    </filter>
    <filter id="glow">
      <feGaussianBlur stdDeviation="3" result="blur"/>
      <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto" fill="#667eea">
      <polygon points="0 0, 10 3.5, 0 7"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1400" height="2200" fill="url(#bgGrad)"/>
  <!-- Subtle dot grid -->
  <pattern id="dots" x="0" y="0" width="40" height="40" patternUnits="userSpaceOnUse">
    <circle cx="20" cy="20" r="0.8" fill="#ffffff" opacity="0.04"/>
  </pattern>
  <rect width="1400" height="2200" fill="url(#dots)"/>

  <!-- ===================== HEADER ===================== -->
  <rect x="40" y="30" width="1320" height="130" rx="18" fill="url(#headerGrad)" filter="url(#shadow)"/>
  <rect x="40" y="30" width="1320" height="130" rx="18" fill="none" stroke="url(#accent1)" stroke-width="1.5" opacity="0.5"/>
  
  <rect x="70" y="55" width="6" height="80" rx="3" fill="url(#accent1)"/>
  <text x="95" y="90" fill="#ffffff" font-size="30" font-weight="bold" letter-spacing="0.5">Floating Point Formats &amp; Foundation</text>
  <text x="95" y="118" fill="#8b8baa" font-size="15" letter-spacing="1.5">IEEE-754 STANDARD • NUMBER REPRESENTATION • PRECISION HIERARCHY</text>
  <text x="95" y="142" fill="#667eea" font-size="12">DeepSeek Quantization Technique — Part 1 of 6</text>
  
  <rect x="1140" y="60" width="190" height="40" rx="8" fill="#667eea" opacity="0.15" stroke="#667eea" stroke-width="1"/>
  <text x="1235" y="85" text-anchor="middle" fill="#667eea" font-size="13" font-weight="bold">FOUNDATIONS</text>

  <!-- ===================== IEEE-754 OVERVIEW ===================== -->
  <rect x="40" y="190" width="1320" height="200" rx="14" fill="#111128" filter="url(#shadow)"/>
  <rect x="40" y="190" width="1320" height="200" rx="14" fill="none" stroke="#333" stroke-width="1"/>
  
  <text x="80" y="228" fill="#c8c8e8" font-size="18" font-weight="bold">IEEE-754 Floating Point Standard</text>
  <line x1="80" y1="240" x2="400" y2="240" stroke="url(#accent1)" stroke-width="2" opacity="0.5"/>

  <text x="80" y="270" fill="#ddd" font-size="14">Every floating-point number is stored as three components:</text>

  <!-- Formula -->
  <rect x="80" y="285" width="1240" height="50" rx="8" fill="#0a0a20" stroke="#667eea" stroke-width="1" opacity="0.5"/>
  <text x="700" y="317" text-anchor="middle" fill="#fff" font-size="18" font-weight="bold">
    Value = (-1)<tspan baseline-shift="super" font-size="12">Sign</tspan> × (1 + Mantissa) × 2<tspan baseline-shift="super" font-size="12">(Exponent - Bias)</tspan>
  </text>

  <g transform="translate(80, 348)">
    <rect x="0" y="0" width="130" height="30" rx="6" fill="#e74c3c" opacity="0.2" stroke="#e74c3c" stroke-width="1"/>
    <text x="65" y="20" text-anchor="middle" fill="#e74c3c" font-size="12" font-weight="bold">Sign (1 bit)</text>
    <text x="145" y="20" fill="#555" font-size="14">+</text>
    <rect x="165" y="0" width="280" height="30" rx="6" fill="#3498db" opacity="0.2" stroke="#3498db" stroke-width="1"/>
    <text x="305" y="20" text-anchor="middle" fill="#3498db" font-size="12" font-weight="bold">Exponent → Range (how big/small)</text>
    <text x="460" y="20" fill="#555" font-size="14">+</text>
    <rect x="480" y="0" width="340" height="30" rx="6" fill="#2ecc71" opacity="0.2" stroke="#2ecc71" stroke-width="1"/>
    <text x="650" y="20" text-anchor="middle" fill="#2ecc71" font-size="12" font-weight="bold">Mantissa → Precision (how accurate)</text>
  </g>

  <!-- ===================== FP32 SECTION ===================== -->
  <rect x="40" y="420" width="1320" height="260" rx="14" fill="#111128" filter="url(#shadow)"/>
  <rect x="40" y="420" width="1320" height="260" rx="14" fill="none" stroke="#2ecc71" stroke-width="1" opacity="0.4"/>
  
  <rect x="40" y="420" width="1320" height="45" rx="14" fill="#2ecc71" opacity="0.08"/>
  <rect x="40" y="450" width="1320" height="15" fill="#111128"/>
  <circle cx="80" cy="442" r="16" fill="#2ecc71" opacity="0.3" stroke="#2ecc71" stroke-width="1.5"/>
  <text x="80" y="448" text-anchor="middle" fill="#2ecc71" font-size="14" font-weight="bold">32</text>
  <text x="110" y="450" fill="#2ecc71" font-size="18" font-weight="bold">FP32 — Single Precision (Standard)</text>
  <text x="820" y="450" fill="#8b8baa" font-size="12">Total: 32 bits • Bias: 127</text>

  <!-- Bit diagram -->
  <g transform="translate(80, 480)">
    <!-- Sign bit -->
    <rect x="0" y="0" width="60" height="55" rx="6" fill="#e74c3c" opacity="0.25" stroke="#e74c3c" stroke-width="2"/>
    <text x="30" y="25" text-anchor="middle" fill="#e74c3c" font-size="14" font-weight="bold">Sign</text>
    <text x="30" y="45" text-anchor="middle" fill="#e74c3c" font-size="12">1 bit</text>
    
    <!-- Exponent -->
    <rect x="70" y="0" width="340" height="55" rx="6" fill="#3498db" opacity="0.2" stroke="#3498db" stroke-width="2"/>
    <text x="240" y="25" text-anchor="middle" fill="#3498db" font-size="14" font-weight="bold">Exponent</text>
    <text x="240" y="45" text-anchor="middle" fill="#3498db" font-size="12">8 bits (Bias = 127)</text>
    <!-- Individual bit cells -->
    <g opacity="0.4">
      <rect x="80" y="5" width="38" height="18" rx="3" fill="#3498db" opacity="0.3"/>
      <rect x="122" y="5" width="38" height="18" rx="3" fill="#3498db" opacity="0.3"/>
      <rect x="164" y="5" width="38" height="18" rx="3" fill="#3498db" opacity="0.3"/>
      <rect x="206" y="5" width="38" height="18" rx="3" fill="#3498db" opacity="0.3"/>
      <rect x="248" y="5" width="38" height="18" rx="3" fill="#3498db" opacity="0.3"/>
      <rect x="290" y="5" width="38" height="18" rx="3" fill="#3498db" opacity="0.3"/>
      <rect x="332" y="5" width="38" height="18" rx="3" fill="#3498db" opacity="0.3"/>
      <rect x="374" y="5" width="20" height="18" rx="3" fill="#3498db" opacity="0.3"/>
    </g>

    <!-- Mantissa -->
    <rect x="420" y="0" width="810" height="55" rx="6" fill="#2ecc71" opacity="0.15" stroke="#2ecc71" stroke-width="2"/>
    <text x="825" y="25" text-anchor="middle" fill="#2ecc71" font-size="14" font-weight="bold">Mantissa (Fraction)</text>
    <text x="825" y="45" text-anchor="middle" fill="#2ecc71" font-size="12">23 bits — High precision</text>
  </g>

  <!-- Properties -->
  <g transform="translate(80, 560)">
    <rect x="0" y="0" width="300" height="55" rx="8" fill="#0a0a20" stroke="#2ecc71" stroke-width="1" opacity="0.6"/>
    <text x="20" y="22" fill="#2ecc71" font-size="12" font-weight="bold">Dynamic Range</text>
    <text x="20" y="42" fill="#ddd" font-size="12">~1.18×10⁻³⁸ to ~3.4×10³⁸</text>
    
    <rect x="320" y="0" width="300" height="55" rx="8" fill="#0a0a20" stroke="#2ecc71" stroke-width="1" opacity="0.6"/>
    <text x="340" y="22" fill="#2ecc71" font-size="12" font-weight="bold">Decimal Precision</text>
    <text x="340" y="42" fill="#ddd" font-size="12">~7.2 significant digits</text>

    <rect x="640" y="0" width="300" height="55" rx="8" fill="#0a0a20" stroke="#2ecc71" stroke-width="1" opacity="0.6"/>
    <text x="660" y="22" fill="#2ecc71" font-size="12" font-weight="bold">Use in DeepSeek</text>
    <text x="660" y="42" fill="#ddd" font-size="12">Master weights, accumulation</text>

    <rect x="960" y="0" width="270" height="55" rx="8" fill="#0a0a20" stroke="#2ecc71" stroke-width="1" opacity="0.6"/>
    <text x="980" y="22" fill="#2ecc71" font-size="12" font-weight="bold">Memory Cost</text>
    <text x="980" y="42" fill="#ffa502" font-size="12">4 bytes per value (baseline)</text>
  </g>

  <text x="80" y="650" fill="#555" font-size="11" font-style="italic">FP32 is the gold standard for precision. DeepSeek keeps master weight copies and gradient accumulators in FP32.</text>

  <!-- ===================== FP16 SECTION ===================== -->
  <rect x="40" y="700" width="640" height="280" rx="14" fill="#111128" filter="url(#shadow)"/>
  <rect x="40" y="700" width="640" height="280" rx="14" fill="none" stroke="#f093fb" stroke-width="1" opacity="0.4"/>
  
  <rect x="40" y="700" width="640" height="42" rx="14" fill="#f093fb" opacity="0.08"/>
  <rect x="40" y="728" width="640" height="14" fill="#111128"/>
  <circle cx="80" cy="721" r="14" fill="#f093fb" opacity="0.3" stroke="#f093fb" stroke-width="1.5"/>
  <text x="80" y="726" text-anchor="middle" fill="#f093fb" font-size="12" font-weight="bold">16</text>
  <text x="108" y="727" fill="#f093fb" font-size="16" font-weight="bold">FP16 — Half Precision</text>
  <text x="420" y="727" fill="#8b8baa" font-size="11">16 bits • Bias: 15</text>

  <g transform="translate(70, 755)">
    <rect x="0" y="0" width="45" height="45" rx="5" fill="#e74c3c" opacity="0.25" stroke="#e74c3c" stroke-width="1.5"/>
    <text x="22" y="20" text-anchor="middle" fill="#e74c3c" font-size="11" font-weight="bold">S</text>
    <text x="22" y="37" text-anchor="middle" fill="#e74c3c" font-size="9">1b</text>
    
    <rect x="52" y="0" width="180" height="45" rx="5" fill="#3498db" opacity="0.2" stroke="#3498db" stroke-width="1.5"/>
    <text x="142" y="20" text-anchor="middle" fill="#3498db" font-size="11" font-weight="bold">Exponent</text>
    <text x="142" y="37" text-anchor="middle" fill="#3498db" font-size="9">5 bits (Bias=15)</text>
    
    <rect x="239" y="0" width="330" height="45" rx="5" fill="#2ecc71" opacity="0.15" stroke="#2ecc71" stroke-width="1.5"/>
    <text x="404" y="20" text-anchor="middle" fill="#2ecc71" font-size="11" font-weight="bold">Mantissa</text>
    <text x="404" y="37" text-anchor="middle" fill="#2ecc71" font-size="9">10 bits</text>
  </g>

  <g transform="translate(70, 820)">
    <rect x="0" y="0" width="270" height="40" rx="6" fill="#0a0a20" stroke="#f093fb" stroke-width="1" opacity="0.5"/>
    <text x="15" y="16" fill="#f093fb" font-size="10" font-weight="bold">Range</text>
    <text x="15" y="32" fill="#ddd" font-size="10">~6.1×10⁻⁵ to 65,504</text>
    
    <rect x="285" y="0" width="270" height="40" rx="6" fill="#0a0a20" stroke="#f093fb" stroke-width="1" opacity="0.5"/>
    <text x="300" y="16" fill="#f093fb" font-size="10" font-weight="bold">Decimal Precision</text>
    <text x="300" y="32" fill="#ddd" font-size="10">~3.3 significant digits</text>
  </g>

  <g transform="translate(70, 875)">
    <rect x="0" y="0" width="555" height="35" rx="6" fill="#2a1020" stroke="#e74c3c" stroke-width="1" opacity="0.6"/>
    <text x="15" y="22" fill="#e74c3c" font-size="11">⚠ Limited range causes overflow in large model training (gradients > 65K)</text>
  </g>

  <g transform="translate(70, 920)">
    <text x="0" y="15" fill="#8b8baa" font-size="11">Good precision (10-bit mantissa) but limited range.</text>
    <text x="0" y="35" fill="#8b8baa" font-size="11">Memory: 2 bytes per value (50% savings vs FP32)</text>
  </g>

  <!-- ===================== BF16 SECTION ===================== -->
  <rect x="720" y="700" width="640" height="280" rx="14" fill="#111128" filter="url(#shadow)"/>
  <rect x="720" y="700" width="640" height="280" rx="14" fill="none" stroke="#4facfe" stroke-width="1" opacity="0.4"/>
  
  <rect x="720" y="700" width="640" height="42" rx="14" fill="#4facfe" opacity="0.08"/>
  <rect x="720" y="728" width="640" height="14" fill="#111128"/>
  <circle cx="760" cy="721" r="14" fill="#4facfe" opacity="0.3" stroke="#4facfe" stroke-width="1.5"/>
  <text x="760" y="726" text-anchor="middle" fill="#4facfe" font-size="12" font-weight="bold">16</text>
  <text x="788" y="727" fill="#4facfe" font-size="16" font-weight="bold">BF16 — Brain Float 16</text>
  <text x="1090" y="727" fill="#8b8baa" font-size="11">16 bits • Bias: 127</text>

  <g transform="translate(750, 755)">
    <rect x="0" y="0" width="45" height="45" rx="5" fill="#e74c3c" opacity="0.25" stroke="#e74c3c" stroke-width="1.5"/>
    <text x="22" y="20" text-anchor="middle" fill="#e74c3c" font-size="11" font-weight="bold">S</text>
    <text x="22" y="37" text-anchor="middle" fill="#e74c3c" font-size="9">1b</text>
    
    <rect x="52" y="0" width="280" height="45" rx="5" fill="#3498db" opacity="0.2" stroke="#3498db" stroke-width="1.5"/>
    <text x="192" y="20" text-anchor="middle" fill="#3498db" font-size="11" font-weight="bold">Exponent</text>
    <text x="192" y="37" text-anchor="middle" fill="#3498db" font-size="9">8 bits (Bias=127) — Same as FP32!</text>
    
    <rect x="339" y="0" width="230" height="45" rx="5" fill="#2ecc71" opacity="0.15" stroke="#2ecc71" stroke-width="1.5"/>
    <text x="454" y="20" text-anchor="middle" fill="#2ecc71" font-size="11" font-weight="bold">Mantissa</text>
    <text x="454" y="37" text-anchor="middle" fill="#2ecc71" font-size="9">7 bits (less precise)</text>
  </g>

  <g transform="translate(750, 820)">
    <rect x="0" y="0" width="270" height="40" rx="6" fill="#0a0a20" stroke="#4facfe" stroke-width="1" opacity="0.5"/>
    <text x="15" y="16" fill="#4facfe" font-size="10" font-weight="bold">Range</text>
    <text x="15" y="32" fill="#ddd" font-size="10">Same as FP32 (~10³⁸)</text>
    
    <rect x="285" y="0" width="270" height="40" rx="6" fill="#0a0a20" stroke="#4facfe" stroke-width="1" opacity="0.5"/>
    <text x="300" y="16" fill="#4facfe" font-size="10" font-weight="bold">Decimal Precision</text>
    <text x="300" y="32" fill="#ddd" font-size="10">~2.4 significant digits</text>
  </g>

  <g transform="translate(750, 875)">
    <rect x="0" y="0" width="555" height="35" rx="6" fill="#0a2a1a" stroke="#43e97b" stroke-width="1" opacity="0.6"/>
    <text x="15" y="22" fill="#43e97b" font-size="11">✓ Same range as FP32 — no overflow issues with large gradients</text>
  </g>

  <g transform="translate(750, 920)">
    <text x="0" y="15" fill="#8b8baa" font-size="11">Trades mantissa bits for range. Ideal for deep learning.</text>
    <text x="0" y="35" fill="#4facfe" font-size="11" font-weight="bold">DeepSeek uses BF16 for activation storage &amp; intermediate results</text>
  </g>

  <!-- ===================== FP8 SECTION — MAIN FOCUS ===================== -->
  <rect x="40" y="1010" width="1320" height="700" rx="14" fill="#111128" filter="url(#shadow)"/>
  <rect x="40" y="1010" width="1320" height="700" rx="14" fill="none" stroke="url(#fp8Grad)" stroke-width="2" opacity="0.6"/>
  
  <rect x="40" y="1010" width="1320" height="50" rx="14" fill="#ff6b6b" opacity="0.08"/>
  <rect x="40" y="1045" width="1320" height="15" fill="#111128"/>
  <text x="80" y="1043" fill="#ff6b6b" font-size="22" font-weight="bold">⚡ FP8 — The Heart of DeepSeek's Innovation</text>
  <text x="640" y="1043" fill="#8b8baa" font-size="13">8 bits total — Two competing formats</text>

  <!-- E4M3 -->
  <rect x="70" y="1080" width="600" height="370" rx="12" fill="#1a0a0a" stroke="#ff6b6b" stroke-width="2"/>
  <rect x="70" y="1080" width="600" height="40" rx="12" fill="#ff6b6b" opacity="0.12"/>
  <rect x="70" y="1108" width="600" height="12" fill="#1a0a0a"/>
  
  <text x="100" y="1108" fill="#ff6b6b" font-size="18" font-weight="bold">★ E4M3 — DeepSeek's Choice</text>
  <rect x="440" y="1090" width="200" height="25" rx="5" fill="#ff6b6b" opacity="0.2" stroke="#ff6b6b" stroke-width="1"/>
  <text x="540" y="1108" text-anchor="middle" fill="#ff6b6b" font-size="11" font-weight="bold">RECOMMENDED</text>

  <!-- Bit diagram -->
  <g transform="translate(100, 1130)">
    <rect x="0" y="0" width="55" height="50" rx="6" fill="#e74c3c" opacity="0.3" stroke="#e74c3c" stroke-width="2"/>
    <text x="27" y="22" text-anchor="middle" fill="#e74c3c" font-size="13" font-weight="bold">S</text>
    <text x="27" y="40" text-anchor="middle" fill="#e74c3c" font-size="10">1 bit</text>
    
    <rect x="62" y="0" width="220" height="50" rx="6" fill="#3498db" opacity="0.2" stroke="#3498db" stroke-width="2"/>
    <text x="172" y="22" text-anchor="middle" fill="#3498db" font-size="13" font-weight="bold">Exponent</text>
    <text x="172" y="40" text-anchor="middle" fill="#3498db" font-size="10">4 bits</text>
    
    <rect x="289" y="0" width="250" height="50" rx="6" fill="#2ecc71" opacity="0.2" stroke="#2ecc71" stroke-width="2"/>
    <text x="414" y="22" text-anchor="middle" fill="#2ecc71" font-size="13" font-weight="bold">Mantissa</text>
    <text x="414" y="40" text-anchor="middle" fill="#2ecc71" font-size="10">3 bits ← Extra precision!</text>
  </g>

  <!-- E4M3 Properties -->
  <g transform="translate(100, 1200)">
    <rect x="0" y="0" width="530" height="42" rx="6" fill="#0a0a20" stroke="#ff6b6b" stroke-width="1" opacity="0.5"/>
    <text x="20" y="17" fill="#ff6b6b" font-size="12" font-weight="bold">Maximum Representable Value</text>
    <text x="20" y="35" fill="#ffa502" font-size="16" font-weight="bold">448</text>
    <text x="80" y="35" fill="#8b8baa" font-size="11">(smaller range, but fine-grained scaling compensates)</text>

    <rect x="0" y="52" width="530" height="42" rx="6" fill="#0a0a20" stroke="#2ecc71" stroke-width="1" opacity="0.5"/>
    <text x="20" y="69" fill="#2ecc71" font-size="12" font-weight="bold">Precision Levels</text>
    <text x="20" y="87" fill="#ddd" font-size="11">2³ = 8 distinct mantissa values per exponent level → finer granularity</text>

    <rect x="0" y="104" width="530" height="42" rx="6" fill="#0a0a20" stroke="#43e97b" stroke-width="1" opacity="0.5"/>
    <text x="20" y="121" fill="#43e97b" font-size="12" font-weight="bold">Why DeepSeek Chose This</text>
    <text x="20" y="139" fill="#ddd" font-size="11">Group scaling handles range → extra mantissa bit provides quality</text>

    <rect x="0" y="156" width="530" height="42" rx="6" fill="#0a2a1a" stroke="#43e97b" stroke-width="1.5"/>
    <text x="20" y="173" fill="#43e97b" font-size="12" font-weight="bold">Used For</text>
    <text x="20" y="191" fill="#43e97b" font-size="12">Weights AND Activations in GEMM operations</text>
  </g>

  <!-- E5M2 -->
  <rect x="710" y="1080" width="630" height="370" rx="12" fill="#12122a" stroke="#555" stroke-width="1.5"/>
  <rect x="710" y="1080" width="630" height="40" rx="12" fill="#555" opacity="0.08"/>
  <rect x="710" y="1108" width="630" height="12" fill="#12122a"/>
  
  <text x="740" y="1108" fill="#999" font-size="18" font-weight="bold">E5M2 — Alternative (Not Chosen)</text>

  <!-- Bit diagram -->
  <g transform="translate(740, 1130)">
    <rect x="0" y="0" width="55" height="50" rx="6" fill="#e74c3c" opacity="0.15" stroke="#e74c3c" stroke-width="1"/>
    <text x="27" y="22" text-anchor="middle" fill="#e74c3c" font-size="13" opacity="0.6">S</text>
    <text x="27" y="40" text-anchor="middle" fill="#999" font-size="10">1 bit</text>
    
    <rect x="62" y="0" width="300" height="50" rx="6" fill="#3498db" opacity="0.1" stroke="#3498db" stroke-width="1"/>
    <text x="212" y="22" text-anchor="middle" fill="#3498db" font-size="13" opacity="0.6">Exponent</text>
    <text x="212" y="40" text-anchor="middle" fill="#999" font-size="10">5 bits (wider range)</text>
    
    <rect x="369" y="0" width="180" height="50" rx="6" fill="#2ecc71" opacity="0.1" stroke="#2ecc71" stroke-width="1"/>
    <text x="459" y="22" text-anchor="middle" fill="#2ecc71" font-size="13" opacity="0.6">Mantissa</text>
    <text x="459" y="40" text-anchor="middle" fill="#999" font-size="10">2 bits only</text>
  </g>

  <!-- E5M2 Properties -->
  <g transform="translate(740, 1200)">
    <rect x="0" y="0" width="560" height="42" rx="6" fill="#0a0a20" stroke="#555" stroke-width="1" opacity="0.5"/>
    <text x="20" y="17" fill="#999" font-size="12" font-weight="bold">Maximum Representable Value</text>
    <text x="20" y="35" fill="#999" font-size="16" font-weight="bold">57,344</text>
    <text x="120" y="35" fill="#666" font-size="11">(much larger range)</text>

    <rect x="0" y="52" width="560" height="42" rx="6" fill="#0a0a20" stroke="#555" stroke-width="1" opacity="0.5"/>
    <text x="20" y="69" fill="#999" font-size="12" font-weight="bold">Precision Levels</text>
    <text x="20" y="87" fill="#666" font-size="11">2² = 4 distinct mantissa values per exponent level → coarser</text>

    <rect x="0" y="104" width="560" height="42" rx="6" fill="#0a0a20" stroke="#555" stroke-width="1" opacity="0.5"/>
    <text x="20" y="121" fill="#999" font-size="12" font-weight="bold">Why Not Chosen</text>
    <text x="20" y="139" fill="#666" font-size="11">Extra range is redundant when group scaling already manages range</text>

    <rect x="0" y="156" width="560" height="42" rx="6" fill="#1a1010" stroke="#e74c3c" stroke-width="1" opacity="0.5"/>
    <text x="20" y="173" fill="#e74c3c" font-size="12" font-weight="bold">Drawback</text>
    <text x="20" y="191" fill="#999" font-size="12">Less precision = lower training quality</text>
  </g>

  <!-- Comparison Summary -->
  <rect x="70" y="1470" width="1270" height="72" rx="10" fill="#0d0d20" stroke="url(#fp8Grad)" stroke-width="1.5"/>
  <text x="100" y="1498" fill="#ff6b6b" font-size="14" font-weight="bold">E4M3 vs E5M2 — The Tradeoff:</text>
  <text x="370" y="1498" fill="#ddd" font-size="13">E4M3 sacrifices range (448 vs 57,344) to gain precision (3 vs 2 mantissa bits).</text>
  <text x="100" y="1522" fill="#43e97b" font-size="12">DeepSeek's fine-grained group scaling (Section 3) compensates for the smaller range → making E4M3 strictly superior for their use case.</text>

  <!-- ===================== PRECISION HIERARCHY DIAGRAM ===================== -->
  <rect x="40" y="1740" width="1320" height="190" rx="14" fill="#111128" filter="url(#shadow)"/>
  <rect x="40" y="1740" width="1320" height="190" rx="14" fill="none" stroke="#667eea" stroke-width="1" opacity="0.3"/>
  
  <text x="80" y="1775" fill="#c8c8e8" font-size="18" font-weight="bold">Complete Precision Hierarchy &amp; Memory Impact</text>

  <g transform="translate(80, 1800)">
    <!-- FP32 -->
    <rect x="0" y="0" width="250" height="90" rx="10" fill="#0a0a20" stroke="#2ecc71" stroke-width="2"/>
    <text x="125" y="25" text-anchor="middle" fill="#2ecc71" font-size="16" font-weight="bold">FP32</text>
    <text x="125" y="48" text-anchor="middle" fill="#ddd" font-size="11">32 bits • 4 bytes</text>
    <text x="125" y="65" text-anchor="middle" fill="#8b8baa" font-size="10">23b mantissa • 8b exp</text>
    <text x="125" y="82" text-anchor="middle" fill="#2ecc71" font-size="10">Master weights</text>

    <line x1="255" y1="45" x2="310" y2="45" stroke="#667eea" stroke-width="2" marker-end="url(#arrow)"/>
    <text x="282" y="38" text-anchor="middle" fill="#667eea" font-size="9">÷2</text>

    <!-- BF16 -->
    <rect x="315" y="0" width="250" height="90" rx="10" fill="#0a0a20" stroke="#4facfe" stroke-width="2"/>
    <text x="440" y="25" text-anchor="middle" fill="#4facfe" font-size="16" font-weight="bold">BF16</text>
    <text x="440" y="48" text-anchor="middle" fill="#ddd" font-size="11">16 bits • 2 bytes</text>
    <text x="440" y="65" text-anchor="middle" fill="#8b8baa" font-size="10">7b mantissa • 8b exp</text>
    <text x="440" y="82" text-anchor="middle" fill="#4facfe" font-size="10">Activation storage</text>

    <line x1="570" y1="45" x2="625" y2="45" stroke="#667eea" stroke-width="2" marker-end="url(#arrow)"/>
    <text x="597" y="38" text-anchor="middle" fill="#667eea" font-size="9">same</text>

    <!-- FP16 -->
    <rect x="630" y="0" width="250" height="90" rx="10" fill="#0a0a20" stroke="#f093fb" stroke-width="1.5"/>
    <text x="755" y="25" text-anchor="middle" fill="#f093fb" font-size="16" font-weight="bold">FP16</text>
    <text x="755" y="48" text-anchor="middle" fill="#ddd" font-size="11">16 bits • 2 bytes</text>
    <text x="755" y="65" text-anchor="middle" fill="#8b8baa" font-size="10">10b mantissa • 5b exp</text>
    <text x="755" y="82" text-anchor="middle" fill="#f093fb" font-size="10">Not primary choice</text>

    <line x1="885" y1="45" x2="940" y2="45" stroke="#667eea" stroke-width="2" marker-end="url(#arrow)"/>
    <text x="912" y="38" text-anchor="middle" fill="#667eea" font-size="9">÷2</text>

    <!-- FP8 -->
    <rect x="945" y="0" width="270" height="90" rx="10" fill="#1a0a0a" stroke="url(#fp8Grad)" stroke-width="2.5"/>
    <text x="1080" y="25" text-anchor="middle" fill="#ff6b6b" font-size="16" font-weight="bold">FP8 (E4M3)</text>
    <text x="1080" y="48" text-anchor="middle" fill="#ddd" font-size="11">8 bits • 1 byte</text>
    <text x="1080" y="65" text-anchor="middle" fill="#8b8baa" font-size="10">3b mantissa • 4b exp</text>
    <text x="1080" y="82" text-anchor="middle" fill="#ff6b6b" font-size="10" font-weight="bold">GEMM compute ⚡</text>
  </g>

  <!-- ===================== KEY TAKEAWAYS ===================== -->
  <rect x="40" y="1960" width="1320" height="210" rx="14" fill="url(#headerGrad)" filter="url(#shadow)"/>
  <rect x="40" y="1960" width="1320" height="210" rx="14" fill="none" stroke="url(#accent1)" stroke-width="1" opacity="0.4"/>
  
  <text x="700" y="2000" text-anchor="middle" fill="#fff" font-size="20" font-weight="bold">Key Takeaways — Floating Point Formats</text>

  <g transform="translate(80, 2020)">
    <rect x="0" y="0" width="390" height="55" rx="8" fill="#0a0a20" stroke="#2ecc71" stroke-width="1.5"/>
    <text x="20" y="22" fill="#2ecc71" font-size="12" font-weight="bold">More mantissa bits = More precision</text>
    <text x="20" y="42" fill="#8b8baa" font-size="11">FP32(23b) > FP16(10b) > BF16(7b) > E4M3(3b)</text>

    <rect x="410" y="0" width="390" height="55" rx="8" fill="#0a0a20" stroke="#3498db" stroke-width="1.5"/>
    <text x="430" y="22" fill="#3498db" font-size="12" font-weight="bold">More exponent bits = More range</text>
    <text x="430" y="42" fill="#8b8baa" font-size="11">FP32=BF16(8b) > E5M2(5b) > FP16=E4M3(4-5b)</text>

    <rect x="820" y="0" width="400" height="55" rx="8" fill="#1a0a0a" stroke="#ff6b6b" stroke-width="1.5"/>
    <text x="840" y="22" fill="#ff6b6b" font-size="12" font-weight="bold">DeepSeek uses each format strategically</text>
    <text x="840" y="42" fill="#8b8baa" font-size="11">FP8 for speed, BF16 for storage, FP32 for critical ops</text>
  </g>

  <g transform="translate(80, 2090)">
    <rect x="0" y="0" width="600" height="55" rx="8" fill="#0a0a20" stroke="#ffa502" stroke-width="1.5"/>
    <text x="20" y="22" fill="#ffa502" font-size="12" font-weight="bold">Fewer bits = Less memory = Faster compute</text>
    <text x="20" y="42" fill="#8b8baa" font-size="11">FP32(4B) → BF16/FP16(2B) → FP8(1B) = 4× memory reduction</text>

    <rect x="620" y="0" width="600" height="55" rx="8" fill="#0a0a20" stroke="#667eea" stroke-width="1.5"/>
    <text x="640" y="22" fill="#667eea" font-size="12" font-weight="bold">The challenge: How to use FP8 without losing quality?</text>
    <text x="640" y="42" fill="#8b8baa" font-size="11">→ Answered by the remaining 5 DeepSeek innovations</text>
  </g>
</svg>
